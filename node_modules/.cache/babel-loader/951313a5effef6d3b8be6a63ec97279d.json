{"ast":null,"code":"var _jsxFileName = \"/home/cyrille/Bureau/REACT/PROJET GUEFF/AYANs-portfolio/src/components/calculatrise/calculator/Calculator.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport './calculator.css';\nimport { btns, BTN_ACTIONS } from './btnConfig';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Calculator = () => {\n  _s();\n\n  const btnsRef = useRef(null);\n  const expRef = useRef(null);\n  const [expression, setExpression] = useState('');\n  useEffect(() => {\n    const btns = Array.from(btnsRef.current.querySelectorAll('button'));\n    btns.forEach(e => e.style.height = e.offsetWidth + 'px');\n  }, []);\n\n  const btnClick = item => {\n    const expDiv = expRef.current;\n    if (item.action === BTN_ACTIONS.THEME) document.body.classList.toggle('dark');\n\n    if (item.action === BTN_ACTIONS.ADD) {\n      addAnimSpan(item.display);\n      const oper = item.display !== 'x' ? item.display : '*';\n      setExpression(expression + oper);\n    }\n\n    if (item.action === BTN_ACTIONS.DELETE) {\n      expDiv.parentNode.querySelector('div:last-child').innerHTML = '';\n      expDiv.innerHTML = '';\n      setExpression('');\n    }\n\n    if (item.action === BTN_ACTIONS.CALC) {\n      if (expression.trim().length <= 0) return;\n      expDiv.parentNode.querySelector('div:last-child').remove();\n      const cloneNode = expDiv.cloneNode(true);\n      expDiv.parentNode.appendChild(cloneNode);\n      const transform = `translateY(${-(expDiv.offsetHeight + 10) + 'px'}) scale(0.4)`;\n\n      try {\n        let res = eval(expression);\n        setExpression(res.toString());\n        setTimeout(() => {\n          cloneNode.style.transform = transform;\n          expDiv.innerHTML = '';\n          addAnimSpan(Math.floor(res * 100000000) / 100000000);\n        }, 200);\n      } catch {\n        setTimeout(() => {\n          cloneNode.style.transform = transform;\n          cloneNode.innerHTML = 'Syntax err';\n        }, 200);\n      } finally {\n        console.log('calc complete');\n      }\n    }\n  };\n\n  const addAnimSpan = content => {\n    const expDiv = expRef.current;\n    const span = document.createElement('span');\n    span.innerHTML = content;\n    span.style.opacity = '0';\n    expDiv.appendChild(span);\n    const width = span.offsetWidth + 'px';\n    span.style.width = '0';\n    setTimeout(() => {\n      span.style.opacity = '1';\n      span.style.width = width;\n    }, 100);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"calculator\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calculator__result\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        ref: expRef,\n        className: \"calculator__result__exp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calculator__result__exp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: btnsRef,\n      className: \"calculator__btns\",\n      children: btns.map((item, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: item.class,\n        onClick: () => btnClick(item),\n        children: item.display\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Calculator, \"5rDOkkwJ5B715jQMq2KzuvLvsBw=\");\n\n_c = Calculator;\nexport default Calculator;\n\nvar _c;\n\n$RefreshReg$(_c, \"Calculator\");","map":{"version":3,"sources":["/home/cyrille/Bureau/REACT/PROJET GUEFF/AYANs-portfolio/src/components/calculatrise/calculator/Calculator.jsx"],"names":["React","useRef","useEffect","useState","btns","BTN_ACTIONS","Calculator","btnsRef","expRef","expression","setExpression","Array","from","current","querySelectorAll","forEach","e","style","height","offsetWidth","btnClick","item","expDiv","action","THEME","document","body","classList","toggle","ADD","addAnimSpan","display","oper","DELETE","parentNode","querySelector","innerHTML","CALC","trim","length","remove","cloneNode","appendChild","transform","offsetHeight","res","eval","toString","setTimeout","Math","floor","console","log","content","span","createElement","opacity","width","map","index","class"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\n\nimport './calculator.css';\n\nimport { btns, BTN_ACTIONS } from './btnConfig';\n\nconst Calculator = () => {\n\n    const btnsRef = useRef(null);\n    const expRef = useRef(null);\n\n    const [expression, setExpression] = useState('');\n\n    useEffect(() => {\n        const btns = Array.from(btnsRef.current.querySelectorAll('button'));\n        btns.forEach(e => e.style.height = e.offsetWidth + 'px');\n    }, []);\n\n    const btnClick = (item) => {\n        const expDiv = expRef.current;\n\n        if (item.action === BTN_ACTIONS.THEME) document.body.classList.toggle('dark');\n\n        if (item.action === BTN_ACTIONS.ADD) {\n            addAnimSpan(item.display);\n\n            const oper = item.display !== 'x' ? item.display : '*';\n            setExpression(expression + oper);\n        }\n\n        if (item.action === BTN_ACTIONS.DELETE) {\n            expDiv.parentNode.querySelector('div:last-child').innerHTML = '';\n            expDiv.innerHTML = '';\n\n            setExpression('');\n        }\n\n        if (item.action === BTN_ACTIONS.CALC) {\n            if (expression.trim().length <= 0) return;\n\n            expDiv.parentNode.querySelector('div:last-child').remove();\n\n            const cloneNode = expDiv.cloneNode(true);\n            expDiv.parentNode.appendChild(cloneNode);\n\n            const transform = `translateY(${-(expDiv.offsetHeight + 10) + 'px'}) scale(0.4)`;\n\n            try {\n                let res = eval(expression);\n\n                setExpression(res.toString());\n                setTimeout(() => {\n                    cloneNode.style.transform = transform;\n                    expDiv.innerHTML = '';\n                    addAnimSpan(Math.floor(res * 100000000) / 100000000);\n                }, 200);\n            } catch {\n                setTimeout(() => {\n                    cloneNode.style.transform = transform;\n                    cloneNode.innerHTML = 'Syntax err';\n                }, 200);\n            } finally {\n                console.log('calc complete');\n            }\n        }\n    }\n\n    const addAnimSpan = (content) => {\n        const expDiv = expRef.current;\n        const span = document.createElement('span');\n\n        span.innerHTML = content;\n        span.style.opacity = '0';\n        expDiv.appendChild(span);\n\n        const width = span.offsetWidth + 'px';\n        span.style.width = '0';\n\n        setTimeout(() => {\n            span.style.opacity = '1';\n            span.style.width = width;\n        }, 100);\n    }\n\n    return (\n        <div className=\"calculator\">\n            <div className=\"calculator__result\">\n                <div ref={expRef} className=\"calculator__result__exp\"></div>\n                <div className=\"calculator__result__exp\"></div>\n            </div>\n            <div ref={btnsRef} className=\"calculator__btns\">\n                {\n                    btns.map((item, index) => (\n                        <button\n                            key={index}\n                            className={item.class}\n                            onClick={() => btnClick(item)}\n                        >\n                            {item.display}\n                        </button>\n                    ))\n                }\n            </div>\n        </div>\n    );\n}\n\nexport default Calculator;\n"]},"metadata":{},"sourceType":"module"}